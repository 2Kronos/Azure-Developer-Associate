# Circuit

[Implementing the IR Remote](https://www.tinkercad.com/things/kMazYTJrpGi-phase-2-simulation-22)
### The IR Receiver & Remote (The "Live Input" or "Dynamic Control")

- **Purpose:** To **dynamically send changing** power levels during operation. It simulates the real-time, unpredictable nature of sunlight and home energy use. You press a button to _change_ the power level instantly.
    
- **How it's used:** You press buttons on the IR remote (e.g., you assign the '1', '2', '3', '4' buttons to levels 0, 1, 2, 3). The IR receiver on pin 3 gets this signal and tells the Arduino the power level has changed.
    
- **Best for:**
    
    - **Final demonstration:** Showing the marker how the machine reacts to _changing_ conditions, which is the core of the project.
        
    - **Testing resilience:** Suddenly dropping the power from 3 to 0 in the middle of a spin cycle to see if it pauses correctly.

# Code

```c++
#include <IRremote.hpp>

const int IR_PIN = 3;
unsigned long inputVal;

void setup()
{
    IrReceiver.begin(IR_PIN, ENABLE_LED_FEEDBACK); // Start the receiver on pin 3
    Serial.begin(9600);
    Serial.println("IR Receiver Ready");
}
int irPower(unsigned long irValue) {
    switch(irValue) {
        case 4077698816: return 0; // Category 0
        case 4010852096: return 1; // Category 1
        case 3994140416: return 2; // Category 2
        case 3977428736: return 3; // Category 3
        default: return -1; // Invalid code
    }
}

// Then in loop():
void loop() {
    if (IrReceiver.decode()) {
        inputVal = IrReceiver.decodedIRData.decodedRawData;
        IrReceiver.resume();
        
        int powerLevel = irPower(inputVal);
        if (powerLevel != -1) {
            Serial.print("IR Power Level: ");
            Serial.println(powerLevel);
        } else {
            Serial.println("Invalid IR code");
        }
      delay(100);
    }
}
```
